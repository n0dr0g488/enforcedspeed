CHANGELOG v411–v420

v411 (created, not deployed)
- Render hardening idea: avoid doing any DB schema/bootstrap work at web process startup; gate behind ES_BOOTSTRAP_DB_ON_START=1.
  (Ultimately PORT env var was the real cause of the “spinning deploy” symptom.)

v412
- Interactive Map pin color scheme updated to match the site-wide intent:
  - Selected pin: deep red
  - In-focus context pins: mid-gray
  - Out-of-focus context pins: same gray, ghosted
- Added local ghosted pin asset (pin_outside_ghostgray.png) used by the interactive map.

v413
- Interactive Map: out-of-focus (ghost) pins now appear correctly by loading context pins beyond the focus polygon.
  - Added context_mode=1 support to /api/map_pins and show “in focus” count in the map meta line.
  - Added viewport bounds filtering to /api/map_pins so the context stays local to what you’re viewing.
- Home feed ticket-card static maps: now include context pins using the same color scheme:
  - Selected pin: deep red
  - In-county context pins: mid-gray
  - Out-of-county context pins: ghost gray

v414
- Ticket-card Static Maps: fix context pin sizing to match the selected red pin (no more massive gray/ghost pins).
  - Added 32×32 *_static variants for warmgray + ghostgray and updated Static Maps builder to use them.
- Ghost pins: increased opacity ~25% (less “ghosted”) and reduced background color bleed (eliminates the pink-ish look).
- Note: Static Maps marker icons are now served from the app’s public /static/img/pins URLs to guarantee the new *_static assets are available.

v415
- Fix regression: county/ticket Static Maps were using app-served /static/img/pins icon URLs, which Google sometimes fails to fetch (Cloudflare/bot checks) causing g.co/staticmaperror and default Google pins.
  - Static Maps marker icons now use STATIC_PIN_BASE_URL again (Cloudflare R2 pins) via _static_pin_base_url().
- Reduced context marker counts on Static Maps (12 in-focus + 12 out-of-focus max) to keep URLs safely under Google Static Maps limits.

v416
- Render deploy stability hardening:
  - Do not run ensure_counties_schema() at boot when FLASK_ENV=production (prevents gunicorn bind delays / spinning deploy)
  - Stop overriding environment variables from .env (load_dotenv without override)



v417
- Fix v416 deploy regression: corrected indentation at end of create_app() (schema bootstrap gate + return app) that caused SyntaxError: 'return' outside function on Render.
- Added/kept guardrail: run python -m py_compile app.py before pushing to GitHub to catch syntax errors pre-deploy.
