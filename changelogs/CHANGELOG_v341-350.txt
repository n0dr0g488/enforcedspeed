EnforcedSpeed — Web Changelog (v341–v350)

v341 (2026-02-15) — Fix Submit Ticket post-pin Static Maps preview (g.co/staticmaperror)
- Static Maps custom marker icon URLs are now built from a deterministic PUBLIC_BASE_URL (env/config) when available.
- Added a Render-safe fallback: if host resolves to an onrender.com hostname, the icon URL defaults to https://enforcedspeed.com.
- Static Maps query encoding now preserves ':' and '/' characters (safe=':/') to avoid edge-case parsing issues for icon: URLs.
- Applied the same public-base icon logic to both /api/county_staticmap (submit preview) and /api/staticmap (mobile proxy).

v342 (2026-02-16) — Add Static Maps debug mode for submit-pin preview
- /api/county_staticmap now supports ?debug=1 to return the upstream Google Static Maps URL and parsed marker/icon details.
- Debug response also attempts a server-side fetch of the icon URL and reports status/final URL/content-type to diagnose redirects or access issues.

v343 (2026-02-16) — Encode Static Maps custom marker icon URL (fix g.co/staticmaperror after pin set)
- Properly URL-encode the icon URL inside the markers=icon:... parameter to satisfy Google Static Maps parsing.
- Adjusted urlencode safe characters to prevent double-encoding of '%' in pre-encoded icon URLs.

v344 (2026-02-16)
- Fix Static Maps query encoding regression: keep % safe for pre-encoded icon URL but re-encode pipes (prevents broken Static Maps requests and restores county preview framing behavior).
- Home feed static maps: always center on county (do not center on pin) to match expected framing.

v345 (2026-02-16)
- Fix Render boot hang by disabling expensive states schema init at app startup; states table remains lazy/optional.
- Keep static maps marker icon URL encoding fix for submit pin preview.

v346 (2026-02-16)
- Fix Submit Ticket pin-preview Static Maps error by using a safe marker fallback (no custom icon) in /api/county_staticmap proxy requests when a pin is present.
- Keep custom pin icons for non-proxy (browser-fetched) static map URLs (e.g., home feed), avoiding g.co/staticmaperror caused by Google failing to fetch icon URLs.
