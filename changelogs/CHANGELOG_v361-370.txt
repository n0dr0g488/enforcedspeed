CHANGELOG v361-370

v361 (2026-02-16)
- Fix /api/home_minimap_staticmap DB lookup for county centers using SQLAlchemy expanding bind (compatible with Render Postgres drivers).
- Add debug=1 option to /api/home_minimap_staticmap to return JSON (chosen_geoids, resolved points, upstream URL/status) for troubleshooting.
- Return upstream content-type + add short cache header for the static minimap image.

v362 (2026-02-16)
- Fix minimap static map generation on Render by dynamically detecting counties coordinate columns (center_lat/center_lng vs centroid_lat/centroid_lng) and falling back safely.

v363 (2026-02-16)
- Fix minimap static map generation across varying counties schemas by supporting PostGIS point columns (center/centroid) and polygon geom fallback (ST_Centroid).

v364 (2026-02-16)
- Fix v363 syntax/boot regression and ensure minimap county coordinate lookup works on Render by selecting available PostGIS columns (center/centroid/geom) without invalid if/elif structure.


v365 (2026-02-16)
- Hotfix: ensure app boots by fixing v363 invalid if/elif in /api/home_minimap_staticmap and supporting PostGIS counties coordinate columns (center/centroid/geom).

v366 (2026-02-16)
- Home right-rail: widen Trending/Followed county name column and tighten 7d/30d/1y columns.
- Home minimap: use custom EnforcedSpeed pins (static map markers) and pad CONUS bounds slightly so WA/OR feel less clipped.

v367 (2026-02-17)
- Ticket cards: make State clickable to open /map focused + filtered to that state; state counts in parentheses are clickable too.
- Map page: remove top title block + bottom meta line, add right-side panel (legend, region label, pins shown) and increase map height (no-scroll on laptop view).
- Unify pin colors across static + minimap + interactive: selected = red; in-county context = mid-gray; out-of-county = ghosted mid-gray.
- Home right-rail Trending + Followed tables: add “Avg. Ovr.” column (best-effort median overage; shows “—” if unavailable).
- Home minimap: zoom out/pad CONUS bounds slightly more to prevent edge-clipping; force HTTPS static pin icon URL so Google uses custom pins reliably.

v368 (2026-02-17)
- Hotfix: fix minimap marker regression by keeping the Static Maps markers param format intact (literal icon:) and encoding only the icon URL; custom pins render again.
- Hotfix: make Trending/Followed county labels robust across differing counties schemas by feature-detecting name/state columns (no more raw GEOIDs).
- Hotfix: remove accidental duplicate right-rail card wrapper that could affect rail layout.


v369 (2026-02-17)
- Hotfix: restore ticket-card county static maps by feature-detecting county geometry source (counties.geom vs counties_geom.geom) and falling back gracefully when unavailable.
- Hotfix: /api/county_staticmap now uses custom pin icon again (no default pins).
- No changes to feed centering logic or pin sizing.
